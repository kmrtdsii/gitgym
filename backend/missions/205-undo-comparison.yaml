id: "205-undo-comparison"
title: "The Undo Trio: reset vs restore vs revert"
description: "Master the three R's of Git undo. Each has a different purpose - learn when to use each one."
difficulty:
  level: "intermediate"
  stars: 3
skill: "reset"

setup:
  - "git init"
  - "git config user.name 'User'"
  - "git config user.email 'user@example.com'"
  - "echo 'Version 1' > file.txt"
  - "git add file.txt"
  - "git commit -m 'v1: Initial version'"
  - "echo 'Version 2' > file.txt"
  - "git add file.txt"
  - "git commit -m 'v2: Updated version'"
  - "echo 'Version 3 - mistake!' > file.txt"
  - "git add file.txt"
  - "git commit -m 'v3: Mistake commit'"
  - "echo 'Version 4 - another mistake' > file.txt"
  - "git add file.txt"

objectives:
  - title: "Step 1: Unstage with restore"
    description: "Use git restore --staged to unstage file.txt without losing changes"
    check:
      type: "file_staged"
      path: "file.txt"
      should_be_staged: false
  - title: "Step 2: Revert the mistake commit"
    description: "Use git revert to create a new commit that undoes v3"
    check:
      type: "commit_count_min"
      count: 4
  - title: "Step 3: Reset to clean history"  
    description: "Use git reset to go back to v2, removing the revert from history"
    check:
      type: "head_commit_message"
      message_pattern: "v2"

hints:
  - "restore ã¯å±¥æ­´ã‚’å¤‰ãˆãšã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¾©å…ƒã—ã¾ã™ã€‚`git restore --staged file.txt`"
  - "revert ã¯æ‰“ã¡æ¶ˆã—ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚å±¥æ­´ã¯æ®‹ã‚Šã¾ã™ã€‚`git revert HEAD`"
  - "reset ã¯å±¥æ­´ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚`git reset --hard HEAD~2`"

scoring:
  time_bonus: true
  hint_penalty: 10
  max_score: 100

translations:
  ja:
    title: "å–ã‚Šæ¶ˆã—ä¸‰å…„å¼Ÿ: reset vs restore vs revert"
    description: "Gitã®3ã¤ã®Rï¼ˆUndoç³»ã‚³ãƒãƒ³ãƒ‰ï¼‰ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã‚ˆã†ã€‚ãã‚Œãã‚Œç”¨é€”ãŒé•ã„ã¾ã™ã€‚"
    objectives:
      - title: "ã‚¹ãƒ†ãƒƒãƒ—1: restore ã§ã‚¢ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¸"
        description: "`git restore --staged` ã‚’ä½¿ã£ã¦ file.txt ã‚’å¤‰æ›´ã‚’å¤±ã‚ãšã«ã‚¢ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¸ã—ã¦ãã ã•ã„"
      - title: "ã‚¹ãƒ†ãƒƒãƒ—2: revert ã§æ‰“ã¡æ¶ˆã—ã‚³ãƒŸãƒƒãƒˆ"
        description: "`git revert` ã‚’ä½¿ã£ã¦ v3 ã®å¤‰æ›´ã‚’æ‰“ã¡æ¶ˆã™æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„"
      - title: "ã‚¹ãƒ†ãƒƒãƒ—3: reset ã§å±¥æ­´æ•´ç†"
        description: "`git reset` ã‚’ä½¿ã£ã¦ v2 ã¾ã§æˆ»ã‚Šã€revert ã‚³ãƒŸãƒƒãƒˆã‚’å±¥æ­´ã‹ã‚‰å‰Šé™¤ã—ã¦ãã ã•ã„"
    hints:
      - "restore ã¯å±¥æ­´ã‚’å¤‰ãˆãšã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¾©å…ƒã—ã¾ã™ã€‚`git restore --staged file.txt`"
      - "revert ã¯æ‰“ã¡æ¶ˆã—ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚å±¥æ­´ã¯æ®‹ã‚Šã¾ã™ã€‚`git revert HEAD`"
      - "reset ã¯å±¥æ­´ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚`git reset --hard HEAD~2`"

summary: |
  ## ğŸ¯ reset vs restore vs revert
  
  | ã‚³ãƒãƒ³ãƒ‰ | å‹•ä½œ | å±¥æ­´ |
  |---------|------|-----|
  | restore | ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¾©å…ƒ | å¤‰ã‚ã‚‰ãªã„ |
  | revert  | æ‰“ã¡æ¶ˆã—ã‚³ãƒŸãƒƒãƒˆä½œæˆ | æ®‹ã‚‹ |
  | reset   | HEADã‚’ç§»å‹• | æ›¸ãæ›ã‚ã‚‹ |
